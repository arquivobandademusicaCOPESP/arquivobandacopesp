<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Arquivo da banda de m√∫sica do Comando de Opera√ß√µes Especiais</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-image: url('https://i.imgur.com/T3P0vvF.jpg'); /* fundo camuflado realista */
      background-size: cover;
      background-attachment: fixed;
      background-repeat: no-repeat;
      color: #fff;
    }

    header {
      background-color: rgba(0, 0, 0, 0.6);
      padding: 20px;
      text-align: center;
      font-size: 1.8em;
      font-weight: bold;
      border-bottom: 2px solid #444;
    }

    #busca {
      display: flex;
      justify-content: center;
      padding: 15px;
      background-color: rgba(0, 0, 0, 0.5);
    }

    #busca input {
      width: 60%;
      padding: 10px;
      font-size: 1em;
      border-radius: 10px;
      border: none;
    }

    #conteudo {
      padding: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: flex-start;
    }

    .folder {
      background-color: rgba(0, 0, 0, 0.5);
      border: 2px solid #555;
      border-radius: 12px;
      padding: 15px;
      width: 160px;
      text-align: center;
      cursor: pointer;
      transition: transform 0.2s;
      color: #fff;
    }

    .folder:hover {
      transform: scale(1.05);
      background-color: rgba(30, 30, 30, 0.8);
    }

    .folder img {
      width: 80px;
      height: 80px;
      margin-bottom: 10px;
    }

    #loading {
      text-align: center;
      margin-top: 50px;
      font-size: 1.2em;
      color: #ccc;
    }

    #loading img {
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    footer {
      position: fixed;
      bottom: 10px;
      right: 20px;
      text-align: right;
      font-size: 0.9em;
      color: #ccc;
      line-height: 1.4;
      background-color: rgba(0, 0, 0, 0.5);
      padding: 8px 12px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <header>Arquivo da banda de m√∫sica do Comando de Opera√ß√µes Especiais</header>

  <div id="busca">
    <input type="text" id="pesquisa" placeholder="üîç Buscar arquivos...">
  </div>

  <div id="loading">
    <img src="https://cdn-icons-png.flaticon.com/512/189/189792.png" alt="Carregando...">
    <div>carregando... aguarde!</div>
  </div>

  <div id="conteudo" style="display: none;"></div>

  <footer>
    Respons√°veis:<br>
    2¬∫ SGT Cesar Augusto.<br>
    SD Proc√≥pio.<br>
    SD Correia.
  </footer>

  <script>
    const URL = "https://script.google.com/macros/s/AKfycby_jTo4pWLeGMn9eKcxA0jAVyfwS6xv8ZUroOFkNMyCRN1CBaqwIMTW-W3j0ViDC0rl/exec";
    let arquivosIndexados = [];

    function criarHTML(pasta) {
      let html = "";

      if (pasta.subpastas) {
        for (const subpasta of pasta.subpastas) {
          html += `
            <div class="folder" onclick="carregarPasta('${subpasta.id}', this)">
              <img src="https://cdn-icons-png.flaticon.com/512/716/716784.png" alt="Pasta">
              <div>${subpasta.nome}</div>
            </div>`;
        }
      }

      if (pasta.arquivos) {
        arquivosIndexados.push(...pasta.arquivos);
      }

      return html;
    }

    function carregarPasta(id, el = null) {
      fetch(`${URL}?id=${id}`)
        .then(res => res.json())
        .then(data => {
          const conteudo = document.getElementById("conteudo");
          conteudo.innerHTML = criarHTML(data);
          document.getElementById("loading").style.display = "none";
          conteudo.style.display = "flex";
        })
        .catch(err => {
          document.getElementById("loading").innerHTML = "Erro ao carregar üò¢";
          console.error(err);
        });
    }

    // Busca arquivos digitando 3 letras
    document.getElementById("pesquisa").addEventListener("input", function() {
      const termo = this.value.trim().toLowerCase();
      const conteudo = document.getElementById("conteudo");

      if (termo.length >= 3) {
        const resultados = arquivosIndexados.filter(arq => arq.nome.toLowerCase().includes(termo));
        conteudo.innerHTML = resultados.map(arq => `
          <div class="folder">
            <img src="https://cdn-icons-png.flaticon.com/512/337/337946.png" alt="Arquivo">
            <a href="${arq.url}" target="_blank">${arq.nome}</a>
          </div>`).join('');
      } else {
        carregarPasta("1kLcbguxmPRYCF2OVWcqQpN8dUQhcJv3U");
      }
    });

    window.onload = () => carregarPasta("1kLcbguxmPRYCF2OVWcqQpN8dUQhcJv3U");
  </script>
</body>
</html>
